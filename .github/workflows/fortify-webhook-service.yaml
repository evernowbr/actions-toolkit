name: fortify-webhook-service

on:
  repository_dispatch:
    types: [fortify_event]

jobs:
  process_webhook:
    runs-on: ubuntu-latest
    steps:
      - name: Exibir Payload Completo (Formatado)
        run: |
          echo "âœ… Payload Recebido:"
          echo '${{ toJson(github.event.client_payload) }}' | jq

      - name: Exibir Dados Individuais
        run: |
          echo "ğŸš€ Webhook do Fortify recebido!"
          echo "ğŸ“¦ Projeto: ${{ github.event.client_payload.projectName }} (ID: ${{ github.event.client_payload.projectId }})"
          echo "ğŸ”„ VersÃ£o: ${{ github.event.client_payload.projectVersionName }} (ID: ${{ github.event.client_payload.projectVersionId }})"
          echo "ğŸ› ï¸ Evento: ${{ github.event.client_payload.events[0].event }}"
          echo "ğŸ“‚ Arquivo: ${{ github.event.client_payload.events[0].filename }}"
          echo "ğŸ“… Data do Evento: ${{ github.event.client_payload.triggeredAt }}"
          echo "ğŸ”— Fortify SSC URL: ${{ github.event.client_payload.sscUrl }}"
          echo "ğŸ†” Webhook ID: ${{ github.event.client_payload.webHookId }}"
